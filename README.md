## Deploy MySql

### Description
This project will create a Vagrant virtual machine (vm) containing a MySql database server that is
accessible from the host OS via a static ip address. This configuration is for development
only and not for production due to several security flaws. These flaws are by design to ease
configuration for developers during development.

### System Requirments
To use this project your system must contain the below listed applications. Click on the name to
go to the install page.

1. [Vagrant](https://www.vagrantup.com/docs/installation/): Virtual machine wrapper that improves workflow for building and managing vms.
2. [VirtualBox](https://www.virtualbox.org/wiki/Downloads): Full virtualizer for x86 hardware. One of several vm providers used by Vagrant.
3. [Ansible](https://docs.ansible.com/ansible/latest/installation_guide/intro_installation.html):
Simple, agentless IT automation.

### Installation
Clone the project into your project directory.
```
cd <my project directory>
git clone https://github.com/JerryShockley/deploy_mysql.git
```
 ### Configuration
 This project is usable as is with no additional configuration. There may be those that wish to
 know what configuration options were used to provision this database and possibly change some of
 them.

##### Networking
After the vm is running, you can access the MySql database server at ip address 192.168.5.99 using
port 3306. You must authenticate as a authorized database user who is authorized to access the
database remotely.

##### DB Users
 Database users and their privileges may be added/modified inside the Ansible
 [playbook.yml](provisioning/playbook.yml) file. The following users are created by default:

 1. Username: root, Password: root, Remote_access: no
 2. Username: dbuser, Password: secret, Remote_access: yes

You can modify, add, or delete users by editing the Ansible [playbook.yml](provisioning/playbook.yml) file. Note that the root user is created using the role defaults, mentioned below, but any changes to defaults must be done in the Ansible [playbook.yml](provisioning/playbook.yml) file.

##### Database
A default database named db1 is created for you. You can modify this by editing the Ansible [playbook.yml](provisioning/playbook.yml) file. 

##### Synced Folders
Vagrant offers a feature called synced folders that will duplicate and synchronize a directory tree that exists on your host machine inside your vm (guest OS). This let's you edit outside your vm and your changes are instantly available inside your vm after saving changes.

By default, the directory tree rooted in the location of the Vagrant file will by synched to your
guest OS. You can override this behavior by modifying the value of the [config.vm.synced_folder](https://www.vagrantup.com/docs/synced-folders/basic_usage.html) option inside the Vagrantfile in the root of this project.

##### Database Defaults
All default other default values used to create the database are located in
[main.yml](provisioning/roles/geerlingguy.mysql/defaults/main.yml). Do not edit this file to
modify or remove any of these default values. To modify or remove these values you must add the
option and value in question to the 'vars:' section of Ansible [playbook.yml](provisioning/playbook.yml) file. 

### Usage
To start the VM and provision the MySql DB: go to directory containing the Vagrantfile.
```
vagrant up
```
To enter the vm and interact with the DB locally
```
vagrant ssh
```

To exit the vm
```
exit
```

To rebuild and reprovision the vm
```
vagrant destroy
vagrant up
```
